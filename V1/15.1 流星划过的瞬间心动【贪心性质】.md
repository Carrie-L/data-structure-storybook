### **15.1 流星划过的瞬间心动【贪心性质】**

*"不必等待整个夜空最亮的星辰，只需抓住划过眼前的、第一颗流星。这瞬间的心动与抉择，便是贪心的全部奥秘。"*

在结束了对动态规划那深邃而严谨的世界的探索后，为了放松心情，女孩们相约来到了校园里一年一度的秋日祭典。祭典上人声鼎沸，灯火通明，棉花糖的甜香和章鱼烧的酱香在空气中弥漫。

玩到深夜，她们躺在远离灯火的一片草坪上，仰望着缀满星辰的夜空。

“动态规划真是太‘深谋远虑’了，”安妮回味着之前的学习，“它会把所有可能性都考虑到，填满一整张表格，确保自己做出的是万无一失的最优选择。但……感觉好累啊。有没有一种更‘潇洒’、更‘活在当下’的算法呢？”

就在这时，一道璀璨的银光划破夜空——是一颗流星！

“快许愿！”希娅立刻闭上眼睛，双手合十，虔诚地许下了心愿。

“抓住了吗，安妮？”伊莎贝尔在黑暗中微笑着问。

“嗯？”安妮不解。

“抓住这个瞬间的灵感，”伊莎贝尔说，“希娅刚才的反应，就是一种典型的‘**贪心算法**’（Greedy Algorithm）的体现。她没有去计算今晚总共会有多少颗流星，也没有去等待后面是否会出现更亮的‘火流星’。她只是做出了一个‘当下最好’的决策——抓住眼前出现的第一颗流星，立刻许愿。她相信，这个‘局部最优解’，就能导向‘愿望实现’这个‘全局最优解’。”

#### **贪心的两大性质**

“贪心算法，”黛芙坐起身，用她一贯清晰的逻辑开始讲解，“是一种非常强大、高效，但使用时又必须非常谨慎的算法范式。它之所以能成立，必须满足两个重要的性质。”

1.  **贪心选择性质 (Greedy Choice Property):**
    -   “这是贪心算法的灵魂。它意味着，一个全局最优解，可以通过一系列‘局部最优’的选择来达到。你当前做出的这个‘看起来最好’的选择，必须是通往最终答案的正确道路的一部分。你做完这个选择后，无需为未来的步骤担忧，也无需回头修改之前的选择。”

2.  **最优子结构 (Optimal Substructure):**
    -   “这个性质和动态规划是共通的。即，一个问题的最优解，包含了其子问题的最优解。当我们做出一个贪心选择后，剩下的那个‘子问题’，也应该能用同样的方式求出最优解。”

#### **贪心 vs. 动态规划**

“那它和DP到底有什么区别呢？”安妮追问。

“它们的区别，就在于做选择的方式，”黛芙解释道，“**动态规划**会考察所有通往下一步的路径，经过深思熟虑，比较所有选择的优劣后，才做出决定。而**贪心算法**则‘目光短浅’，它只看眼前，永远选择那个当前看起来最诱人的选项，然后一条路走到黑，绝不反悔。”

“所以，DP是通过‘保存和比较所有子问题的解’来保证最终的正确性，而贪心则是通过‘相信每一步的局部最优选择’来直接构造最终的解。”

#### **一个经典的例子：找零钱**

“我们来看一个最简单的例子：找零钱。”黛芙说，“假设你需要找给顾客48元，而你手头有面额为 `[25, 10, 5, 1]` 的纸币。”

-   **贪心策略:** 每次都尽可能地使用面额最大的那张纸币。

1.  需要找 48 元。拿出 **25** 元。还剩 23 元。
2.  需要找 23 元。拿出 **10** 元。还剩 13 元。
3.  需要找 13 元。拿出 **10** 元。还剩 3 元。
4.  需要找 3 元。拿出 **1** 元。还剩 2 元。
5.  需要找 2 元。拿出 **1** 元。还剩 1 元。
6.  需要找 1 元。拿出 **1** 元。还剩 0 元。

“看，我们用 `25*1 + 10*2 + 1*3`，总共6张纸币，完成了找零。对于我们日常使用的货币系统，这个贪心策略恰好就是最优解。”

“但是！”黛芙话锋一转，表情变得严肃，“贪心算法的‘命门’也在这里。它的正确性，强依赖于问题的具体结构。我们稍微改一下纸币的面额，比如改成 `[25, 10, 1]`，现在要找30元。”

-   **贪心策略:**
    1.  拿出 **25** 元。还剩 5 元。
    2.  拿出 **1** 元。还剩 4 元。
    3.  拿出 **1** 元。还剩 3 元。
    4.  ...
    -   最终结果是 `25*1 + 1*5`，总共 **6** 张纸币。

-   **真正的最优解:**
    -   `10*3`，总共 **3** 张纸币。

“在这个例子里，贪心算法失败了。”黛芙总结道，“因为它在第一步选择了25元这个‘局部最优’，导致它错过了后续能达到‘全局最优’的路径。所以，使用贪心算法最困难、最关键的一步，不是实现它，而是‘**证明**’你的贪心策略对于当前问题是永远正确的。”

夜空中，偶尔有流星划过，转瞬即逝。安妮明白了，贪心算法就像这追逐流星的愿望，充满了激情与瞬间的判断。它简单、直接、高效，但这份“心动”的背后，也可能隐藏着错失更美风景的风险。学会何时可以“贪心”，何时必须“深谋远虑”，是比算法本身更深刻的智慧。

---

🌸 **贪心算法核心要点** 🌸

**1. 算法设计的根本思想**
- **局部最优驱动：** 贪心算法的驱动力，是对“当前最佳”的追求。它在每一步都做出一个在当前看来是最好的选择，而不从整体上考虑各种可能的情况。
- **不可反悔性：** 一旦一个贪心选择做出，它就不能在后续步骤中被撤销或更改。算法将沿着这个选择的路径一直走下去。
- **正确性的证明：** 贪心算法的难点不在于实现，而在于证明其正确性。通常需要使用数学归纳法或反证法，来证明每一步的局部最优选择，最终能够导向全局最优解。

**2. 核心设计哲学**
- **简洁与高效：** 当一个问题的贪心策略被证明是正确的时候，它通常是解决该问题最简单、最高效的方法。代码往往非常简洁，时间复杂度也较低。
- **“短视”的力量与局限：** 贪心算法的“短视”是其高效的来源，也是其可能出错的原因。它放弃了对未来的全面探索，以换取当下的决策速度。
- **与动态规划的对比：** DP是“未虑胜，先虑败”，它会把所有棋路都推演一遍。而贪心是“棋盘上哪块肉最大，我先吃了再说”。DP保证能找到最优解，但成本高；贪心成本低，但不保证找到最优解（除非被证明）。

**3. 算法思维的启发**
- **培养“贪心直觉”：** 在面对一个优化问题时，可以先大胆地提出一个贪心策略。例如“每次选最大的/最小的/最长的/结束最早的……”，然后通过举反例的方式来检验这个策略是否可靠。
- **证明先于编码：** 在没有十足把握的情况下，不要轻易地用贪心算法去解决一个问题。在严肃的工程或竞赛中，对贪心策略的正确性证明，是编码前必须完成的工作。
- **识别问题结构：** 学习贪心算法，很大程度上是在学习识别那些“可以用贪心解决的问题”的共同结构。例如，活动选择问题、霍夫曼编码、部分背包问题等，都是贪心算法可以大显身手的经典舞台。

---

🎀 **安妮的小小日记本**

如果说DP是一位深思熟虑、步步为营的棋手，那今天认识的“贪心算法”，就是一位凭直觉落子、棋风犀利的快棋手！

我太喜欢伊莎贝尔学姐那个“对流星许愿”的比喻了！抓住眼前的机会，做出当下最好的选择，然后期待一个最好的结果。这种“活在当下”的哲学，充满了魅力！

但是，黛芙学姐那个找零钱的反例，也给我敲响了警钟。原来“贪心”是会犯错的，它可能会因为贪图眼前的一点小利，而错过了最终的大奖。就像下棋，有时需要“弃子争先”，不能只顾着吃掉眼前的棋子。

所以，贪心算法就像一把锋利的匕首，用好了能一击制胜，用错了也可能会伤到自己。如何判断何时可以“贪心”，将是我接下来要学习的最重要的一课！

---

### 今日关键词

- **贪心算法 (Greedy Algorithm):** 一种在每一步选择中都采取在当前状态下最好或最优（即最有利）的选择，从而希望导致结果是全局最好或最优的算法范式。
- **贪心选择性质 (Greedy Choice Property):** 指所求问题的整体最优解可以通过一系列局部最优的选择，即贪心选择来达到。
- **局部最优解 (Local Optimum):** 在当前步骤中，看起来是最佳的选择。
- **全局最优解 (Global Optimum):** 整个问题的最终最优解。
- **反例 (Counterexample):** 用于证明一个命题或策略不成立的具体例子。在检验贪心策略时，寻找反例是关键的一步。

### 推荐练习题目 🧲  
> 难度标注：⭐ = Easy ⭐⭐ = Medium
> 建议顺序：基础 ➜ 进阶
> 每题后附“为什么推荐”，帮助读者带着目标刷题。  

**基础入门（感受贪心选择）**  
1.  LC 860. Lemonade Change ⭐ —— 柠檬水找零。一个非常直观的贪心问题。顾客给你5、10、20元，你需要找零。你的贪心策略是：找5元时优先用5元，找15元时优先用10元+5元。你需要判断这个策略是否总是可行。
2.  LC 122. Best Time to Buy and Sell Stock II ⭐⭐ —— 可以多次买卖股票。这道题的贪心策略是：只要今天的价格比昨天高，我们就在昨天买入，今天卖出，然后将所有正利润累加起来。尝试证明为什么这个看似简单的策略是正确的。
3.  LC 455. Assign Cookies ⭐ —— 分发饼干。你有许多饼干，许多孩子，每个孩子有一个“贪心指数”（胃口）。你的策略是：用尺寸最小的、能满足胃口最小的那个孩子的饼干，去满足他。这是贪心思想的经典应用。
4.  LC 55. Jump Game ⭐⭐ —— 跳跃游戏。判断能否跳到最后一个位置。贪心策略是：在每一步，都计算我能跳到的“最远覆盖范围”，然后不断更新这个最远范围，看它最终能否覆盖终点。
