### **1.5 樱雨纷飞的研习茶会【数组·刷题精选】**

*"当理论的糖果，化为指尖的代码；当缤纷的樱雨，融入温热的茶香。每一次的解题，都是一场在春日里，与智慧的浪漫邂逅。"*

在系统地学习了数组的内存原理、动态扩容、以及各项操作的复杂度之后，安妮对这个最基础的数据结构，有了“知其然，亦知其所以然”的深刻理解。

为了将这些理论，真正地转化为实战能力，黛芙提议，在樱花开得最盛的这个周末，举办一次特别的“研习茶会”。

地点，就在社团活动室的那个能看到满树樱花的窗边。伊莎贝尔为大家准备了精致的樱花水信玄饼和手冲咖啡，空气中，弥漫着咖啡的醇香与春日限定的甜美气息。

“今天，我们不学新东西。”黛芙微笑着说，“我们只做一件事：解决问题。我挑选了几道最经典、最高频的数组题目。它们就像一块块‘试金石’，能检验出我们对数组特性的理解，到底有多深。”

#### **第一道茶：双指针的华尔兹 (Two Sum II)**

希娅首先展示了第一题：**LC 167. 两数之和 II - 输入有序数组**。

“题目要求，在一个‘**已排序**’的数组中，找到两个数，使得它们的和等于一个特定的目标值`target`。要求空间复杂度为O(1)。”

“因为数组是‘有序’的！”安妮立刻抓住了这个最重要的线索，“我们不能用哈希表了，因为那需要O(N)的空间。但是，正因为有序，我们可以用一种更巧妙的方法！”

“**双指针！**”她和希娅异口同声地说了出来。

**解题思路：**
1.  创建两个指针，`left`指向数组的开头，`right`指向数组的末尾。
2.  当`left < right`时，循环：
    -   计算`sum = nums[left] + nums[right]`。
    -   如果`sum == target`，找到了！返回`left`和`right`的下标。
    -   如果`sum < target`，说明我们需要一个更大的和。因为`right`已经是最大的了，所以我们只能尝试把`left`向右移动一位，来增大总和。`left++`。
    -   如果`sum > target`，说明我们需要一个更小的和。因为`left`已经是最小的了，所以我们只能尝试把`right`向左移动一位，来减小总和。`right--`。

“看，”伊莎贝尔比喻道，“`left`和`right`两个指针，就像两位在舞池两端开始的舞者。他们根据音乐的节奏（`sum`与`target`的比较），不断地、默契地，向着舞池中央靠近。每一次的移动，都排除掉了一整行或一整列的可能性。最终，他们必然会在唯一的那个‘交汇点’相遇。”

“这个算法，只遍历了一遍数组，时间复杂度是O(N)，空间复杂度是O(1)，完美！”黛芙总结道。

#### **第二道茶：滑动窗口的定格 (Minimum Size Subarray Sum)**

“下一题，来一点挑战。”黛芙指向了屏幕：**LC 209. 长度最小的子数组**。

“给定一个含有`n`个正整数的数组和一个正整数`target`。找出该数组中满足其和`≥ target`的、长度最小的‘**连续子数组**’，并返回其长度。如果不存在，则返回0。”

“‘连续子数组’！”安妮立刻捕捉到了这个关键词，“这是‘**滑动窗口**’的信号！”

**解题思路：**
1.  创建两个指针，`left`和`right`，都从0开始，它们构成了一个左闭右开的窗口`[left, right)`。
2.  用一个变量`window_sum`来维护窗口内元素的和。
3.  用一个`for`循环，让`right`指针不断地向右扩张，将新元素纳入窗口，并更新`window_sum`。
4.  在`right`扩张后，进入一个`while`循环，判断当前窗口是否满足条件（`window_sum >= target`）：
    -   如果满足，我们就找到了一个“可行解”。用当前的窗口长度`right - left`，去更新我们记录的“最小长度`min_len`”。
    -   然后，为了寻找“更短”的可行解，我们必须尝试“**收缩**”窗口。即将`left`指针向右移动一位，并从`window_sum`中减去被移出窗口的那个元素的值。
    -   继续`while`循环，直到窗口不再满足条件为止。
5.  `right`指针继续扩张，重复上述过程，直到遍历完整个数组。

“滑动窗口的精髓，就在于`right`的‘无情扩张’和`left`的‘条件收缩’。”希娅总结道，“`right`负责寻找可行解，`left`则负责在该可行解的基础上，寻找最优解。两个指针都只走一遍，时间复杂度O(N)。”

#### **第三道茶：矩阵的螺旋漫步 (Spiral Matrix)**

“最后，我们来挑战一个二维数组的遍历问题。”伊莎贝尔为大家端上最后一道“甜点”：**LC 54. 螺旋矩阵**。

“要求我们，按照‘顺时针螺旋’的顺序，返回矩阵中的所有元素。”

“这道题，没有复杂的算法，纯粹考验对‘**边界控制**’和‘**状态模拟**’的细心与严谨。”黛芙说。

**解题思路：**
1.  我们可以设定四个“边界”变量：`top`, `bottom`, `left`, `right`，分别代表当前待遍历矩阵的上下左右边界。
2.  开启一个大的`while`循环，条件是`top <= bottom`且`left <= right`。
3.  在循环中，分“四步走”，模拟螺旋的一圈：
    -   **从左到右:** 遍历`top`行，从`left`到`right`。
    -   **从上到下:** 遍历`right`列，从`top`到`bottom`。
    -   **从右到左:** 遍历`bottom`行，从`right`到`left`。（注意判断`top <= bottom`）
    -   **从下到上:** 遍历`left`列，从`bottom`到`top`。（注意判断`left <= right`）
4.  不断循环，直到边界相遇或交错，所有元素都被遍历完毕。

“这道题，就像是在削一个方形的苹果。”伊莎贝尔笑道，“我们一圈一圈地，从外皮削到果核，每削完一圈，苹果（边界）就小了一圈。”

窗外的樱花，在春风中，跳着最后的、绚烂的舞蹈。安妮感觉，自己的大脑，也在这一下午的“头脑体操”中，变得前所未有的灵活和清晰。她明白了，数组，这个看似最简单的结构，却能像一个万花筒，变幻出无穷无尽的、考验着逻辑、细心与智慧的谜题。

---

🌸 **数组解题核心要点** 🌸

**1. 算法设计的根本思想**
- **利用有序性：** 当数组有序时，一定要立刻想到“二分查找”或“双指针”，这通常是通往O(logN)或O(N)解法的金钥匙。
- **空间换时间：** （回顾）当需要快速判断元素是否存在或计数时，使用哈希表（`unordered_map`/`unordered_set`）来预处理或存储信息，是一种非常常见的、用空间换时间的策略。
- **双指针/滑动窗口：** （回顾）对于“连续子数组”相关的问题，双指针和滑动窗口，是实现线性时间复杂度的不二法门。其核心在于，通过指针的同向移动，避免了嵌套循环带来的平方级复杂度。

**2. 核心设计哲学**
- **边界控制的严谨性：** 数组问题，特别是二维数组遍历问题，极其考验对“边界条件”的处理。`left <= right`, `i < n`, `j >= 0`……一个微小的边界错误，都可能导致死循环或数组越界。画图、手动模拟，是保证边界正确的最好方法。
- **状态模拟：** 很多数组问题，不涉及高级算法，而是考验你是否能用几个变量，清晰地“模拟”一个过程。螺旋矩阵就是典型，你需要用`top, bottom, left, right`四个变量，来精确地模拟边界的收缩。

**3. 算法思维的启发**
- **“降维”思考：** 二维数组的问题，可以先思考在一维情况下如何解决，然后再将其扩展到二维。例如，在一个二维矩阵中寻找某个数，可以先对每一行进行二分查找。
- **“预计算”思想：** （回顾）对于需要反复计算“区间和”的问题，可以先用O(N)的时间，预处理出一个“前缀和数组”，然后就能O(1)地回答任何区间的求和。这是用预计算，来优化查询的典型思路。

---

🎀 **安妮的小小日记本**

今天的研习茶会，好开心！

我们就像一群围在一起，破解古代谜题的考古学家。每一道题，都像一块刻满了神秘符号的石板。而我们学过的那些算法思想，就是解读这些符号的“罗塞塔石碑”。

“有序数组”，就是“双指针”的邀请函。“连续子数组”，则在向“滑动窗口”招手。“在矩阵里转圈圈”，考验的则是我们对边界的耐心和细心。

我发现，我现在解题，不再是“碰运气”了。我学会了去观察题目中的“线索”，然后从我的“工具箱”里，拿出最匹配的那一把工具。虽然有时候，还是会选错工具，或者用得不熟练，但这种“有章可循”的感觉，让我充满了信心。

从数组开始，到数组结束。感觉我的“卷一”冒险，画上了一个圆满的句号！

---

### 今日关键词

- **双指针 (Two Pointers):** （回顾）一种通过使用两个指针，在序列上进行同向或相向移动，来优化算法的技巧。
- **滑动窗口 (Sliding Window):** （回顾）双指针的一种特例，用于解决连续子数组/子串的问题。
- **状态模拟 (State Simulation):** 通过一组变量，来跟踪和模拟一个过程或系统的状态变化。
- **边界控制 (Boundary Control):** 在算法中，对循环的起始/终止条件、数组的索引范围等边界情况，进行精确、无误的处理。

### 推荐练习题目 🧲  
> 难度标注：⭐ = Easy ⭐⭐ = Medium
> （本章的练习题已在1.4节中详细列出，此处不再重复。请参考1.4节的推荐列表，并额外挑战以下几道经典的、能体现数组核心思想的题目。）

**额外挑战**
1.  LC 11. Container With Most Water ⭐⭐ —— 盛最多水的容器。经典的“相向双指针”应用。从两端开始，每次移动指向较短那块板的指针，并更新最大面积。
2.  LC 287. Find the Duplicate Number ⭐⭐⭐ —— 寻找重复数。一个非常巧妙的题目。可以将数组的“值”和“下标”看作一个隐式的“链表”（`i -> nums[i]`）。因为有重复数，所以这个“链表”必然有环。问题就转化为了“寻找环形链表的入口”，可以用快慢指针解决。
3.  LC 48. Rotate Image ⭐⭐ —— 旋转图像。要求原地O(1)空间旋转一个N×N的矩阵。可以通过“先沿主对角线翻转，再沿垂直中线翻转”的两次操作，来实现顺时针90度的旋转。是考验矩阵操作和观察力的好题。
