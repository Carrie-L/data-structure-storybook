# 第02章 成长的容器

*动态数组就像一个会长大的心灵容器，当装不下更多美好回忆时，它会悄悄扩展自己的空间。这种自适应的智慧，正如我们在友谊中学会的包容与成长。*

第二天的黄昏，DSA Lab里飘着淡淡的薰衣草香气——那是希娅新买的香薰蜡烛。夕阳的余晖透过百叶窗在地板上画出金色的条纹，整个实验室都被染上了温暖的橘色调。

安妮坐在昨天的位置，今天她换了一套粉蓝色的连衣裙，搭配白色小开衫，脚上是一双带着蝴蝶结的小白鞋。她的粉色卷发用一个星星形状的发夹半扎起来，露出白皙的脖颈。此刻她正皱着小眉头，盯着屏幕上不断增长的数据列表。

"奇怪...为什么数据越来越多了？"安妮嘟囔着，碧绿色的眼睛里写满了困惑，"昨天我们建立的数组明明只能存10个温度数据，但是今天实验室又产生了好多新数据..."

她试图将新的数据添加到昨天建立的固定大小数组中，但每次都收到"数组越界"的错误提示。小脸蛋因为挫败感而微微鼓起，像一只生气的小松鼠。

"遇到困难了吗，小安妮？"希娅的声音从身后传来，带着一丝慵懒的磁性。

安妮回头看去，希娅正端着一杯冒着热气的花茶走过来。今天的希娅穿着一件奶白色的毛衣，下身是焦糖色的A字短裙，金色的波浪卷发随意地散在肩膀上，蓝色的大眼睛在夕阳下闪着琥珀般的光泽。她的耳朵上戴着一对精致的月亮形耳环，走动时轻轻摇摆着。

"希娅姐！"安妮立刻转向她，小手指着屏幕，"你看，我想把今天的新数据也加进去，但是数组装不下了...难道要重新建一个更大的数组吗？"

希娅在安妮身边坐下，身上传来淡淡的柠檬香水味。她将花茶递给安妮，然后仔细看了看代码。"啊，我明白了。你现在遇到的问题，正是固定数组的局限性呢。"

"局限性？"安妮接过温热的茶杯，花香和茶香混合在一起，让她的心情稍微平静了一些。

"对呀，"希娅温柔地解释道，"固定大小的数组就像是...一个不会长大的首饰盒。当你想要收集更多漂亮的首饰时，就会发现盒子太小了。"

就在这时，实验室的门轻轻推开，伊莎贝尔走了进来。她今天穿着一件浅紫色的长袖连衣裙，外面套着白色针织外套，黑色的长发编成了一个优雅的侧麻花辫，整个人看起来既知性又温柔。

"你们在讨论什么有趣的问题？"伊莎贝尔走过来，眼中闪着关切的光芒。

"安妮遇到了数组容量不够的问题，"希娅指了指屏幕，"我正想给她介绍动态数组的概念。"

伊莎贝尔点点头，在她们对面坐下："那正好，我们可以一起来看看动态数组是如何解决这个问题的。"

"动态数组？"安妮眨着大眼睛，充满好奇。

"是的，"伊莎贝尔打开自己的笔记本，"动态数组就像是一个会成长的容器。当空间不够时，它会自动扩展自己的容量。"

希娅兴奋地补充道："就像我们的友谊一样！最开始可能只是简单的同学关系，但随着相处时间的增长，我们的心灵容器也在不断扩大，能够容纳更多的关心、信任和美好回忆。"

听到这个比喻，安妮的脸颊微微泛红，心中涌起一阵暖流。

伊莎贝尔在屏幕上敲打着代码，向她们展示动态数组的实现原理：

```python
class DynamicArray:
    def __init__(self):
        self.capacity = 2  # 初始容量
        self.size = 0      # 当前元素数量
        self.data = [None] * self.capacity
    
    def append(self, item):
        if self.size >= self.capacity:
            self._resize()  # 容量不够时扩容
        self.data[self.size] = item
        self.size += 1
    
    def _resize(self):
        old_capacity = self.capacity
        self.capacity *= 2  # 容量翻倍
        new_data = [None] * self.capacity
        for i in range(self.size):
            new_data[i] = self.data[i]
        self.data = new_data
        print(f"扩容！从 {old_capacity} 扩展到 {self.capacity}")
```

"哇！"安妮瞪大了眼睛，"它会自己变大！"

"没错，"伊莎贝尔温和地说道，"当我们尝试添加新元素时，如果发现空间不够了，动态数组会自动创建一个更大的内部数组（通常是原来的两倍大小），然后把所有旧数据复制过去。"

希娅用手比划着解释："就像搬家一样！当我们的房间装不下越来越多的东西时，就会搬到一个更大的房子里，把所有珍贵的物品都带过去。"

安妮试着运行了代码，看着动态数组如何处理不断增加的温度数据：

```python
temp_array = DynamicArray()
daily_temps = [22.5, 23.1, 24.8, 23.7, 22.9, 25.2, 24.1, 23.8, 22.4, 24.5, 25.8, 26.2]

for temp in daily_temps:
    temp_array.append(temp)
```

屏幕上出现了输出：
```
扩容！从 2 扩展到 4
扩容！从 4 扩展到 8
扩容！从 8 扩展到 16
```

"太神奇了！"安妮兴奋地拍手，"它真的会自己长大！就像...就像我们的心一样！"

这时，黛芙推门走了进来。她今天的装扮依然简洁优雅，银灰色的头发梳成了低马尾，穿着一件深蓝色的长袖衬衫，外面套着黑色的马甲，显得干练而知性。不过，她的表情看起来有些疲惫。

"你们这么开心在讨论什么？"黛芙走过来，声音里带着一丝疲倦。

"黛芙！"安妮立刻跳起来，"我们在学动态数组呢！你快来看，它会自己变大，就像魔法一样！"

黛芙看了看屏幕，浅灰色的眼眸中闪过一丝赞赏："动态数组确实很重要。在实际项目中，我们经常需要处理大小未知的数据集，动态数组提供了很好的解决方案。"

她停顿了一下，然后说道："不过，扩容操作虽然方便，但也有代价。每次扩容都需要O(n)的时间来复制所有元素，虽然通过摊还分析，平均插入时间仍然是O(1)。"

"摊还分析？"安妮好奇地问道。

希娅温柔地解释："就像是分期付款的概念。虽然偶尔需要付出较大的代价（扩容），但长期来看，平均成本是很低的。"

伊莎贝尔补充道："这就像我们在成长过程中偶尔会遇到挫折，需要花费额外的精力来调整自己，但这些努力会让我们变得更强大，能够应对更多的挑战。"

黛芙听到这个比喻，眼中的疲惫稍微缓解了一些。她在沙发上坐下，声音轻了一些："确实如此。有时候成长需要突破舒适圈，需要重新构建自己的'容器'。"

安妮敏锐地察觉到黛芙语气中的一丝低落，她轻轻走到黛芙身边，小心翼翼地问道："黛芙姐，你今天看起来有点累，发生什么事了吗？"

黛芙愣了一下，看着安妮那双清澈关切的眼睛，心中涌起一阵暖流。她伸出手轻抚安妮的头发："没什么大事，只是在想一些项目上的问题。"

"那让我们一起想办法吧！"安妮握住黛芙的手，"就像动态数组一样，当一个人的容量不够时，我们可以四个人一起来承担！"

希娅和伊莎贝尔也围了过来，希娅轻轻握住黛芙的另一只手："安妮说得对，我们是团队，任何困难都可以一起面对。"

伊莎贝尔温柔地说道："就像动态数组会智能地扩容一样，我们的友谊也会在需要的时候提供更多的支持和空间。"

黛芙看着围在身边的三个女孩，感受着她们手心的温暖，心中的坚冰开始融化。也许，她不需要总是一个人承担所有的责任，也许，信任朋友并不意味着软弱。

"谢谢你们，"黛芙的声音有些哽咽，"我想...我正在学习如何扩展自己的'心灵容器'。"

四个女孩紧紧握在一起的手，就像动态数组中紧密连接的元素一样，虽然容量在增长，但她们之间的联系变得更加牢固。

夕阳西下，实验室里的薰衣草香气依然温柔地包围着她们。在这个充满科技感的空间里，她们不仅学会了动态数组的原理，更重要的是，她们学会了如何让友谊在需要的时候自然地成长和扩展。

> 动态数组（Dynamic Array）：一种可以自动扩容或缩容的数组，实现灵活的内存管理和平衡的访问性能。 